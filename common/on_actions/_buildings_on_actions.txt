on_actions = {
    on_startup = {
        effect = {
            every_country = {
                if = {
                    limit = {
                        check_variable = {
                            num_of_military_factories > 5
                        }
                        has_tech = heavy_weapons
                    }
                    capital_scope = {
                        add_building_construction = {
                            type = heavy_military_complex
                            level = 2
                            instant_build = yes
                        }
                    }
                    every_owned_state = {
                        limit = {
                            air_complex > 0
                        }
                        add_building_construction = {
                            type = heavy_military_complex
                            level = 1
                            instant_build = yes
                        }
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            num_of_military_factories > 0
                        }
                        has_tech = heavy_weapons
                    }
                    capital_scope = {
                        add_building_construction = {
                            type = heavy_military_complex
                            level = 2
                            instant_build = yes
                        }
                    }
                }
                else = {
                    #
                }
            }
        }
    }
    on_startup = { #this is just to avoid the available mil factories alert
        effect = {
            every_country = {
                limit = {
                    is_ai = no
                }
                add_equipment_production = {
                    equipment = {
                        type = dummy_eq_2
                    }
                    requested_factories = 200 #?
                }
            }
        }
    }
    on_weekly_ADU = {
        effect = {
            every_country = {
                limit = {
                    is_ai = yes
                }
                add_equipment_production = {
                    equipment = {
                        type = dummy_eq_1
                    }
                    requested_factories = 1
                }
            }
        }
    }
	on_startup = {
		effect = {
            every_country = {
                limit = {
                    is_ai = yes
                }
                add_equipment_production = {
                    equipment = {
                        type = dummy_eq_1
                    }
                    requested_factories = 1
                }
            }
            ###
            ADU = {
                every_state = {
                    add_dynamic_modifier = {
                        modifier = building_resources_used
                    }
                    set_variable = { building_resources_used_energy = 0 }
                    set_variable = { building_resources_used_polymers = 0 }
                    set_variable = { building_resources_used_lithium = 0 }
                    set_variable = { building_resources_used_electronics = 0 }
                    set_variable = { building_resources_used_superalloys = 0 }
                    set_variable = { building_resources_used_superconductors = 0 }
                    #
                    set_variable = { 
                        spaceship_complex_used_polymers = 3 
                    }
                    multiply_variable = {
                        spaceship_complex_used_polymers = building_level@spaceship_complex
                    }
                    add_to_variable = {
                        building_resources_used_polymers = spaceship_complex_used_polymers
                    }
                    #
                    set_variable = { 
                        military_complex_used_lithium = 2
                    }
                    multiply_variable = {
                        military_complex_used_lithium = building_level@military_complex
                    }
                    add_to_variable = {
                        building_resources_used_lithium = military_complex_used_lithium
                    }
                    set_variable = { 
                        heavy_military_complex_used_lithium = 4
                    }
                    multiply_variable = {
                        heavy_military_complex_used_lithium = building_level@heavy_military_complex
                    }
                    add_to_variable = {
                        building_resources_used_lithium = heavy_military_complex_used_lithium
                    }
                    #
                    set_variable = { 
                        military_complex_used_electronics = 1
                    }
                    multiply_variable = {
                        military_complex_used_electronics = building_level@military_complex
                    }
                    add_to_variable = {
                        building_resources_used_electronics = military_complex_used_electronics
                    }
                    set_variable = { 
                        heavy_military_complex_used_electronics = 3
                    }
                    multiply_variable = {
                        heavy_military_complex_used_electronics = building_level@heavy_military_complex
                    }
                    add_to_variable = {
                        building_resources_used_electronics = heavy_military_complex_used_electronics
                    }
                    set_variable = { 
                        spaceship_complex_used_electronics = 4 
                    }
                    multiply_variable = {
                        spaceship_complex_used_electronics = building_level@spaceship_complex
                    }
                    add_to_variable = {
                        building_resources_used_electronics = spaceship_complex_used_electronics
                    }
                    #
                    set_variable = { 
                        military_complex_used_superalloys = 1
                    }
                    multiply_variable = {
                        military_complex_used_superalloys = building_level@military_complex
                    }
                    add_to_variable = {
                        building_resources_used_superalloys = military_complex_used_superalloys
                    }
                    set_variable = { 
                        heavy_military_complex_used_superalloys = 3
                    }
                    multiply_variable = {
                        heavy_military_complex_used_superalloys = building_level@heavy_military_complex
                    }
                    add_to_variable = {
                        building_resources_used_superalloys = heavy_military_complex_used_superalloys
                    }
                    set_variable = { 
                        spaceship_complex_used_superalloys = 1
                    }
                    multiply_variable = {
                        spaceship_complex_used_superalloys = building_level@spaceship_complex
                    }
                    add_to_variable = {
                        building_resources_used_superalloys = spaceship_complex_used_superalloys
                    }
                    #
                    set_variable = { 
                        heavy_military_complex_used_superconductors = 1
                    }
                    multiply_variable = {
                        heavy_military_complex_used_superconductors = building_level@heavy_military_complex
                    }
                    add_to_variable = {
                        building_resources_used_superconductors = heavy_military_complex_used_superconductors
                    }
                    set_variable = { 
                        spaceship_complex_used_superconductors = 1
                    }
                    multiply_variable = {
                        spaceship_complex_used_superconductors = building_level@spaceship_complex
                    }
                    add_to_variable = {
                        building_resources_used_superconductors = spaceship_complex_used_superconductors
                    }
                }
            }     
		}
	}
###
    on_daily_ADU = {
		effect = {
            every_state = {
                set_variable = { building_resources_used_energy = 0 }
                set_variable = { building_resources_used_polymers = 0 }
                set_variable = { building_resources_used_lithium = 0 }
                set_variable = { building_resources_used_electronics = 0 }
                set_variable = { building_resources_used_superalloys = 0 }
                set_variable = { building_resources_used_superconductors = 0 }
                #
                set_variable = { 
                    spaceship_complex_used_polymers = 3 
                }
                multiply_variable = {
                    spaceship_complex_used_polymers = building_level@spaceship_complex
                }
                add_to_variable = {
                    building_resources_used_polymers = spaceship_complex_used_polymers
                }
                #
                set_variable = { 
                    military_complex_used_lithium = 2
                }
                multiply_variable = {
                    military_complex_used_lithium = building_level@military_complex
                }
                add_to_variable = {
                    building_resources_used_lithium = military_complex_used_lithium
                }
                set_variable = { 
                    heavy_military_complex_used_lithium = 4
                }
                multiply_variable = {
                    heavy_military_complex_used_lithium = building_level@heavy_military_complex
                }
                add_to_variable = {
                    building_resources_used_lithium = heavy_military_complex_used_lithium
                }
                #
                set_variable = { 
                    military_complex_used_electronics = 1
                }
                multiply_variable = {
                    military_complex_used_electronics = building_level@military_complex
                }
                add_to_variable = {
                    building_resources_used_electronics = military_complex_used_electronics
                }
                set_variable = { 
                    heavy_military_complex_used_electronics = 3
                }
                multiply_variable = {
                    heavy_military_complex_used_electronics = building_level@heavy_military_complex
                }
                add_to_variable = {
                    building_resources_used_electronics = heavy_military_complex_used_electronics
                }
                set_variable = { 
                    spaceship_complex_used_electronics = 4 
                }
                multiply_variable = {
                    spaceship_complex_used_electronics = building_level@spaceship_complex
                }
                add_to_variable = {
                    building_resources_used_electronics = spaceship_complex_used_electronics
                }
                #
                set_variable = { 
                    military_complex_used_superalloys = 1
                }
                multiply_variable = {
                    military_complex_used_superalloys = building_level@military_complex
                }
                add_to_variable = {
                    building_resources_used_superalloys = military_complex_used_superalloys
                }
                set_variable = { 
                    heavy_military_complex_used_superalloys = 3
                }
                multiply_variable = {
                    heavy_military_complex_used_superalloys = building_level@heavy_military_complex
                }
                add_to_variable = {
                    building_resources_used_superalloys = heavy_military_complex_used_superalloys
                }
                set_variable = { 
                    spaceship_complex_used_superalloys = 1
                }
                multiply_variable = {
                    spaceship_complex_used_superalloys = building_level@spaceship_complex
                }
                add_to_variable = {
                    building_resources_used_superalloys = spaceship_complex_used_superalloys
                }
                #
                set_variable = { 
                    heavy_military_complex_used_superconductors = 1
                }
                multiply_variable = {
                    heavy_military_complex_used_superconductors = building_level@heavy_military_complex
                }
                add_to_variable = {
                    building_resources_used_superconductors = heavy_military_complex_used_superconductors
                }
                set_variable = { 
                    spaceship_complex_used_superconductors = 1
                }
                multiply_variable = {
                    spaceship_complex_used_superconductors = building_level@spaceship_complex
                }
                add_to_variable = {
                    building_resources_used_superconductors = spaceship_complex_used_superconductors
                }
            }  
            every_country = {
                limit = {
                    OR = {
                        check_variable = {
                            resource@energy < 0
                        }
                        check_variable = {
                            resource@polymers < 0
                        }
                        check_variable = {
                            resource@electronics < 0
                        }
                        check_variable = {
                            resource@superalloys < 0
                        }
                        check_variable = {
                            resource@superconductors < 0
                        }
                        check_variable = {
                            resource@lithium < 0
                        }
                    }
                }
                set_variable = {
                    too_many_building_resources_used_var = 0
                }
                if = {
                    limit = {
                        check_variable = {
                            resource@energy < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@energy
                    }
                }
                if = {
                    limit = {
                        check_variable = {
                            resource@polymers < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@polymers
                    }
                }  
                if = {
                    limit = {
                        check_variable = {
                            resource@electronics < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@electronics
                    }
                } 
                if = {
                    limit = {
                        check_variable = {
                            resource@superalloys < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@superalloys
                    }
                } 
                if = {
                    limit = {
                        check_variable = {
                            resource@superconductors < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@superconductors
                    }
                } 
                if = {
                    limit = {
                        check_variable = {
                            resource@lithium < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@lithium
                    }
                }
                divide_variable = {
                    too_many_building_resources_used_var = 200
                }   
                if = {
                    limit = {
                        NOT = {
                            has_dynamic_modifier = {
                                modifier = too_many_building_resources_used
                            }
                        }
                    }
                }
                add_dynamic_modifier = {
                    modifier = too_many_building_resources_used
                }            
            }    
        }
    }
    ###
    on_daily = {
        effect = {
            set_variable = { num_military_complex = 0 }
            set_variable = { num_heavy_military_complex = 0 }
            every_controlled_state = {
                #add_to_variable = { 
                #    PREV.num_military_complex = building_level@military_complex 
                #}
                add_to_variable = { 
                    PREV.num_heavy_military_complex = building_level@heavy_military_complex 
                }
            }
            add_to_variable = { 
                PREV.num_military_complex = num_of_military_factories
            }
            #
            if = {
                limit = {
                    has_idea = free_trade
                }
                multiply_variable = { num_military_complex = 1.15 }
            }
            else_if = {
                limit = {
                    has_idea = export_focus
                }
                multiply_variable = { num_military_complex = 1.1 }
            }
            else_if = {
                limit = {
                    has_idea = limited_exports
                }
                multiply_variable = { num_military_complex = 1.05 }
            }
            if = {
                limit = {
                    has_idea = autocratic_authority
                }
                multiply_variable = { num_military_complex = 1.15 }
            }
            if = {
                limit = {
                    has_idea = PRU_military_decentralization_extensive
                }
                multiply_variable = { num_military_complex = 0.9 }
            }
            if = {
                limit = {
                    has_idea = TRE_absence_of_civilization
                }
                multiply_variable = { num_military_complex = 0.5 }
            }
            if = {
                limit = {
                    has_idea = TZN_legitimize_ai_planning
                }
                multiply_variable = { num_military_complex = 1.1 }
            }
            #
            if = {
                limit = {
                    has_idea = TZN_legitimize_recycling_tanks
                }
                multiply_variable = { num_heavy_military_complex = 1.25 }
            }
            #
            if = {
                limit = {
                    has_tech = light_weapons
                }
                add_equipment_to_stockpile = {
                    type = light_equipment_1
                    amount = num_military_complex
                }
            }
            if = {
                limit = {
                    has_tech = heavy_weapons
                }
                add_equipment_to_stockpile = {
                    type = heavy_equipment_1
                    amount = num_heavy_military_complex
                }
            }
            set_variable = {
                total_stockpile = 0
            }
            add_to_variable = {
                total_stockpile = num_equipment@light_equipment_1
            }
            add_to_variable = {
                total_stockpile = num_equipment@heavy_equipment_1
            }
        }
    }
    on_weekly = {
        effect = {
            set_variable = {
                amount_of_air_equipment = 0
            }
            add_to_variable = {
                amount_of_air_equipment = num_equipment@drone_equipment_1
            }
            add_to_variable = {
                amount_of_air_equipment = num_equipment@tac_equipment_1
            }
            add_to_variable = {
                amount_of_air_equipment = num_equipment@fighter_equipment_01
            }
            add_to_variable = {
                amount_of_air_equipment = num_equipment@cas_equipment_1
            }
            set_variable = { num_air_complex = 0 }
            every_controlled_state = {
                limit = {
                    air_complex > 0
                }
                add_to_variable = { 
                    PREV.num_air_complex = 1
                }
            }
            set_variable = {
                air_complex_capability = 0
            }
            add_to_variable = {
                air_complex_capability = num_air_complex
            }
            multiply_variable = {
                air_complex_capability = 200
            }
            if = {
                limit = {
                    check_variable = {
                        air_complex_capability > amount_of_air_equipment
                    }                        
                }
                set_variable = { num_air_complex_with_military_complex = 0 }
                every_controlled_state = {
                    limit = {
                        military_complex > 0
                        air_complex > 0
                    }
                    add_to_variable = { 
                        PREV.num_air_complex_with_military_complex = 1
                    }
                }
                set_variable = { num_air_complex_with_heavy_military_complex = 0 }
                every_controlled_state = {
                    limit = {
                        heavy_military_complex > 0
                        air_complex > 0
                    }
                    add_to_variable = { 
                        PREV.num_air_complex_with_heavy_military_complex = 1
                    }
                }
                if = {
                    limit = {
                        has_tech = drone_swarms
                    }
                    add_equipment_to_stockpile = {
                        type = drone_equipment_1
                        amount = num_air_complex
                    }
                }
                if = {
                    limit = {
                        has_tech = airframe
                    }
                    add_equipment_to_stockpile = {
                        type = fighter_equipment_01
                        amount = num_air_complex_with_military_complex
                    }
                }
                if = {
                    limit = {
                        has_tech = cas_tech
                    }
                    add_equipment_to_stockpile = {
                        type = cas_equipment_1
                        amount = num_air_complex_with_military_complex
                    }
                }
                if = {
                    limit = {
                        has_tech = tac_tech
                    }
                    add_equipment_to_stockpile = {
                        type = tac_equipment_1
                        amount = num_air_complex_with_heavy_military_complex
                    }
                }              
            }
        }
    }
}
