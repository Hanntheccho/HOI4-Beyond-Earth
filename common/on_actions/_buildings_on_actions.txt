on_actions = {
    on_weekly_ADU = {
        effect = {
            every_country = {
                limit = {
                    is_ai = yes
                }
                add_equipment_production = {
                    equipment = {
                        type = dummy_eq_1
                    }
                    requested_factories = 1
                }
            }
        }
    }
	on_startup = {
		effect = {
            every_country = {
                limit = {
                    is_ai = yes
                }
                add_equipment_production = {
                    equipment = {
                        type = dummy_eq_1
                    }
                    requested_factories = 1
                }
            }
            ###
            ADU = {
                every_state = {
                    add_dynamic_modifier = {
                        modifier = building_resources_used
                    }
                    set_variable = { building_resources_used_energy = 0 }
                    set_variable = { building_resources_used_polymers = 0 }
                    set_variable = { building_resources_used_lithium = 0 }
                    set_variable = { building_resources_used_electronics = 0 }
                    set_variable = { building_resources_used_superalloys = 0 }
                    set_variable = { building_resources_used_superconductors = 0 }
                    #
                    set_variable = { 
                        spaceship_factory_used_polymers = 3 
                    }
                    multiply_variable = {
                        spaceship_factory_used_polymers = building_level@spaceship_factory
                    }
                    add_to_variable = {
                        building_resources_used_polymers = spaceship_factory_used_polymers
                    }
                    #
                    set_variable = { 
                        arms_factory_used_lithium = 4 
                    }
                    multiply_variable = {
                        arms_factory_used_lithium = building_level@arms_factory
                    }
                    add_to_variable = {
                        building_resources_used_lithium = arms_factory_used_lithium
                    }
                    set_variable = { 
                        heavy_arms_factory_used_lithium = 6
                    }
                    multiply_variable = {
                        heavy_arms_factory_used_lithium = building_level@heavy_arms_factory
                    }
                    add_to_variable = {
                        building_resources_used_lithium = heavy_arms_factory_used_lithium
                    }
                    #
                    set_variable = { 
                        arms_factory_used_electronics = 2
                    }
                    multiply_variable = {
                        arms_factory_used_electronics = building_level@arms_factory
                    }
                    add_to_variable = {
                        building_resources_used_electronics = arms_factory_used_electronics
                    }
                    set_variable = { 
                        heavy_arms_factory_used_electronics = 4
                    }
                    multiply_variable = {
                        heavy_arms_factory_used_electronics = building_level@heavy_arms_factory
                    }
                    add_to_variable = {
                        building_resources_used_electronics = heavy_arms_factory_used_electronics
                    }
                    set_variable = { 
                        spaceship_factory_used_electronics = 5 
                    }
                    multiply_variable = {
                        spaceship_factory_used_electronics = building_level@spaceship_factory
                    }
                    add_to_variable = {
                        building_resources_used_electronics = spaceship_factory_used_electronics
                    }
                    #
                    set_variable = { 
                        arms_factory_used_superalloys = 2
                    }
                    multiply_variable = {
                        arms_factory_used_superalloys = building_level@arms_factory
                    }
                    add_to_variable = {
                        building_resources_used_superalloys = arms_factory_used_superalloys
                    }
                    set_variable = { 
                        heavy_arms_factory_used_superalloys = 4
                    }
                    multiply_variable = {
                        heavy_arms_factory_used_superalloys = building_level@heavy_arms_factory
                    }
                    add_to_variable = {
                        building_resources_used_superalloys = heavy_arms_factory_used_superalloys
                    }
                    set_variable = { 
                        spaceship_factory_used_superalloys = 2
                    }
                    multiply_variable = {
                        spaceship_factory_used_superalloys = building_level@spaceship_factory
                    }
                    add_to_variable = {
                        building_resources_used_superalloys = spaceship_factory_used_superalloys
                    }
                    #
                    set_variable = { 
                        heavy_arms_factory_used_superconductors = 2
                    }
                    multiply_variable = {
                        heavy_arms_factory_used_superconductors = building_level@heavy_arms_factory
                    }
                    add_to_variable = {
                        building_resources_used_superconductors = heavy_arms_factory_used_superconductors
                    }
                    set_variable = { 
                        spaceship_factory_used_superconductors = 2
                    }
                    multiply_variable = {
                        spaceship_factory_used_superconductors = building_level@spaceship_factory
                    }
                    add_to_variable = {
                        building_resources_used_superconductors = spaceship_factory_used_superconductors
                    }
                }
            }     
		}
	}
###
    on_daily_ADU = {
		effect = {
            every_state = {
                set_variable = { building_resources_used_energy = 0 }
                set_variable = { building_resources_used_polymers = 0 }
                set_variable = { building_resources_used_lithium = 0 }
                set_variable = { building_resources_used_electronics = 0 }
                set_variable = { building_resources_used_superalloys = 0 }
                set_variable = { building_resources_used_superconductors = 0 }
                #
                set_variable = { 
                    spaceship_factory_used_polymers = 3 
                }
                multiply_variable = {
                    spaceship_factory_used_polymers = building_level@spaceship_factory
                }
                add_to_variable = {
                    building_resources_used_polymers = spaceship_factory_used_polymers
                }
                #
                set_variable = { 
                    arms_factory_used_lithium = 4 
                }
                multiply_variable = {
                    arms_factory_used_lithium = building_level@arms_factory
                }
                add_to_variable = {
                    building_resources_used_lithium = arms_factory_used_lithium
                }
                set_variable = { 
                    heavy_arms_factory_used_lithium = 6 
                }
                multiply_variable = {
                    heavy_arms_factory_used_lithium = building_level@heavy_arms_factory
                }
                add_to_variable = {
                    building_resources_used_lithium = heavy_arms_factory_used_lithium
                }
                #
                set_variable = { 
                    arms_factory_used_electronics = 2
                }
                multiply_variable = {
                    arms_factory_used_electronics = building_level@arms_factory
                }
                add_to_variable = {
                    building_resources_used_electronics = arms_factory_used_electronics
                }
                set_variable = { 
                    heavy_arms_factory_used_electronics = 4 
                }
                multiply_variable = {
                    heavy_arms_factory_used_electronics = building_level@heavy_arms_factory
                }
                add_to_variable = {
                    building_resources_used_electronics = heavy_arms_factory_used_electronics
                }
                set_variable = { 
                    spaceship_factory_used_electronics = 5 
                }
                multiply_variable = {
                    spaceship_factory_used_electronics = building_level@spaceship_factory
                }
                add_to_variable = {
                    building_resources_used_electronics = spaceship_factory_used_electronics
                }
                #
                set_variable = { 
                    arms_factory_used_superalloys = 2
                }
                multiply_variable = {
                    arms_factory_used_superalloys = building_level@arms_factory
                }
                add_to_variable = {
                    building_resources_used_superalloys = arms_factory_used_superalloys
                }
                set_variable = { 
                    heavy_arms_factory_used_superalloys = 4
                }
                multiply_variable = {
                    heavy_arms_factory_used_superalloys = building_level@heavy_arms_factory
                }
                add_to_variable = {
                    building_resources_used_superalloys = heavy_arms_factory_used_superalloys
                }
                set_variable = { 
                    spaceship_factory_used_superalloys = 2
                }
                multiply_variable = {
                    spaceship_factory_used_superalloys = building_level@spaceship_factory
                }
                add_to_variable = {
                    building_resources_used_superalloys = spaceship_factory_used_superalloys
                }
                #
                set_variable = { 
                    heavy_arms_factory_used_superconductors = 2
                }
                multiply_variable = {
                    heavy_arms_factory_used_superconductors = building_level@heavy_arms_factory
                }
                add_to_variable = {
                    building_resources_used_superconductors = heavy_arms_factory_used_superconductors
                }
                set_variable = { 
                    spaceship_factory_used_superconductors = 2
                }
                multiply_variable = {
                    spaceship_factory_used_superconductors = building_level@spaceship_factory
                }
                add_to_variable = {
                    building_resources_used_superconductors = spaceship_factory_used_superconductors
                }
            }  
            every_country = {
                limit = {
                    OR = {
                        check_variable = {
                            resource@energy < 0
                        }
                        check_variable = {
                            resource@polymers < 0
                        }
                        check_variable = {
                            resource@electronics < 0
                        }
                        check_variable = {
                            resource@superalloys < 0
                        }
                        check_variable = {
                            resource@superconductors < 0
                        }
                        check_variable = {
                            resource@lithium < 0
                        }
                    }
                }
                set_variable = {
                    too_many_building_resources_used_var = 0
                }
                if = {
                    limit = {
                        check_variable = {
                            resource@energy < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@energy
                    }
                }
                if = {
                    limit = {
                        check_variable = {
                            resource@polymers < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@polymers
                    }
                }  
                if = {
                    limit = {
                        check_variable = {
                            resource@electronics < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@electronics
                    }
                } 
                if = {
                    limit = {
                        check_variable = {
                            resource@superalloys < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@superalloys
                    }
                } 
                if = {
                    limit = {
                        check_variable = {
                            resource@superconductors < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@superconductors
                    }
                } 
                if = {
                    limit = {
                        check_variable = {
                            resource@lithium < 0
                        }
                    }
                    add_to_variable = {
                        too_many_building_resources_used_var = resource@lithium
                    }
                }
                divide_variable = {
                    too_many_building_resources_used_var = 200
                }   
                if = {
                    limit = {
                        NOT = {
                            has_dynamic_modifier = {
                                modifier = too_many_building_resources_used
                            }
                        }
                    }
                }
                add_dynamic_modifier = {
                    modifier = too_many_building_resources_used
                }            
            }    
        }
    }
    ###
    on_daily = {
        effect = {
            set_variable = { num_arms_factory = 0 }
            set_variable = { num_heavy_arms_factory = 0 }
            every_controlled_state = {
                add_to_variable = { 
                    PREV.num_arms_factory = building_level@arms_factory 
                }
                add_to_variable = { 
                    PREV.num_heavy_arms_factory = building_level@heavy_arms_factory 
                }
            }
            #
            if = {
                limit = {
                    has_idea = free_trade
                }
                multiply_variable = { num_arms_factory = 1.15 }
            }
            else_if = {
                limit = {
                    has_idea = export_focus
                }
                multiply_variable = { num_arms_factory = 1.1 }
            }
            else_if = {
                limit = {
                    has_idea = limited_exports
                }
                multiply_variable = { num_arms_factory = 1.05 }
            }
            if = {
                limit = {
                    has_idea = limited_conscription
                }
                multiply_variable = { num_arms_factory = 1.1 }
            }
            else_if = {
                limit = {
                    has_idea = service_by_requirement
                }
                multiply_variable = { num_arms_factory = 0.9 }
            }
            else_if = {
                limit = {
                    has_idea = all_adults_serve
                }
                multiply_variable = { num_arms_factory = 0.8 }
            }
            if = {
                limit = {
                    has_idea = military_government
                }
                multiply_variable = { num_arms_factory = 1.15 }
            }
            if = {
                limit = {
                    has_idea = PRU_military_decentralization_extensive
                }
                multiply_variable = { num_arms_factory = 0.9 }
            }
            if = {
                limit = {
                    has_idea = TRE_absence_of_civilization
                }
                multiply_variable = { num_arms_factory = 0.5 }
            }
            #
            if = {
                limit = {
                    has_tech = light_weapons
                }
                add_equipment_to_stockpile = {
                    type = light_equipment_1
                    amount = num_arms_factory
                }
            }
            if = {
                limit = {
                    has_tech = heavy_weapons
                }
                add_equipment_to_stockpile = {
                    type = heavy_equipment_1
                    amount = num_heavy_arms_factory
                }
            }
        }
    }
}
