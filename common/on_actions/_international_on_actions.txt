on_actions = {
    ###
    on_daily_ADU = {
        effect = {
            if = {
                limit = {
                    NOT = {
                        OR = {
                            has_global_flag = spaceship_already_internationalized
                            has_global_flag = spaceship_launched_already
                        }
                    }
                }
                every_country = {
                    limit = {
                        has_country_flag = international_member
                    }
                    add_to_variable = { global.spaceship_contribution_variable = THIS.spaceship_contribution_variable }
                }
                divide_variable = { global.spaceship_contribution_variable = 10000 }
                every_country = {
                    subtract_from_variable = { spaceship_completion_time = global.spaceship_contribution_variable }   
                }
            }
            else = {
                #
            }            
        }
    }
    ###
    on_startup = {
        effect = {
            every_country = {
                limit = {
                    NOT = {
                        OR = {
                            has_idea = anarchy_style
                            tag = COL
                            tag = COS
                            tag = NAX
                            tag = USA
                            tag = SIL
                        }
                    }
                }
                set_country_flag = international_member
            }
            every_country = {
                set_variable = { spaceship_completion_time = 365 } #180
            }
            every_country = {
                limit = {
                    has_country_flag = international_member
                }
                set_variable = { spaceship_contribution_variable = 0 }
                set_variable = { spaceship_contribution_modifier = 1 }
                set_variable = { spaceship_contribution_civilian = num_of_civilian_factories }
                set_variable = { spaceship_contribution_military = num_of_military_factories }
                set_variable = { spaceship_contribution_dockyard = num_of_naval_factories }

                #SPACESHIP FACTORY
                set_variable = { spaceship_contribution_spaceship_factory = 0 }
                every_controlled_state = {
                    add_to_variable = { PREV.spaceship_contribution_spaceship_factory = building_level@spaceship_factory }
                }
                multiply_variable = { spaceship_contribution_spaceship_factory = 20 }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_spaceship_factory }
                ###

                multiply_variable = { spaceship_contribution_civilian = 2 }
                multiply_variable = { spaceship_contribution_military = 1 }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_civilian }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_military }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_dockyard }
                multiply_variable = { spaceship_contribution_variable = spaceship_contribution_modifier }
            }
            set_global_flag = module_1_under_construction_flag
        }
    }
    ###
    on_daily = {
        effect = {
            if = {
                limit = {
                    NOT = {
                        OR = {
                            has_global_flag = spaceship_already_internationalized
                            has_global_flag = spaceship_launched_already
                        }
                    }
                }
                if = {
                    limit = {
                        spaceship_completely_internationalized = yes
                        NOT = {
                            OR = {
                                has_global_flag = unify_spaceship_button_disabled
                                has_global_flag = spaceship_launched_already
                            }
                        }
                    }
                    news_event = {
                        id = international_news_event.8
                        days = 0
                    }
                }
                if = {
                    limit = {
                        NOT = {
                            any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
                        }
                    }
                    ROOT = {
                        add_to_array = {
                            array = global.spaceship_contribution_array
                            value = THIS.id
                            index = 0
                        }
                        every_country = {
                            set_variable = { number_one_contribution_variable = ROOT.spaceship_contribution_variable }
                        }
                    }
                }
                if = {
                    limit = {
                        any_owned_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = bridge_location_modifier
                                }
                            }
                        }
                    }
                    ROOT = {
                        add_to_array = {
                            array = global.module_one_builder_array
                            value = THIS.id
                            index = 0
                        }
                    }
                }
                if = {
                    limit = {
                        any_owned_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = quarters_location_modifier
                                }
                            }
                        }
                    }
                    ROOT = {
                        add_to_array = {
                            array = global.module_two_builder_array
                            value = THIS.id
                            index = 0
                        }
                    }
                }
                if = {
                    limit = {
                        any_owned_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = support_location_modifier
                                }
                            }
                        }
                    }
                    ROOT = {
                        add_to_array = {
                            array = global.module_three_builder_array
                            value = THIS.id
                            index = 0
                        }
                    }
                }
                if = {
                    limit = {
                        any_owned_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = storage_location_modifier
                                }
                            }
                        }
                    }
                    ROOT = {
                        add_to_array = {
                            array = global.module_four_builder_array
                            value = THIS.id
                            index = 0
                        }
                    }
                }
                if = {
                    limit = {
                        any_owned_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = engine_location_modifier
                                }
                            }
                        }
                    }
                    ROOT = {
                        add_to_array = {
                            array = global.module_five_builder_array
                            value = THIS.id
                            index = 0
                        }
                    }
                }
                ###if puppet, give modules to overlord
                if = {
                    limit = {
                        any_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = bridge_location_modifier
                                }
                                controller = {
                                    is_puppet_of = ROOT
                                }
                            }
                        }
                    }
                    every_country = {
                        limit = {
                            is_puppet_of = ROOT
                        }
                        every_owned_state = {
                            remove_dynamic_modifier = { modifier = bridge_location_modifier }
                        }
                        remove_from_array = { global.module_one_builder_array = THIS.id }
                    }
                    ROOT = {
                        capital_scope = {
                            add_dynamic_modifier = {
                                modifier = bridge_location_modifier
                            }
                        }
                        add_to_array = { global.module_one_builder_array = THIS.id }
                    }
                }
                if = {
                    limit = {
                        any_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = quarters_location_modifier
                                }
                                controller = {
                                    is_puppet_of = ROOT
                                }
                            }
                        }
                    }
                    every_country = {
                        limit = {
                            is_puppet_of = ROOT
                        }
                        every_owned_state = {
                            remove_dynamic_modifier = { modifier = quarters_location_modifier }
                        }
                        remove_from_array = { global.module_two_builder_array = THIS.id }
                    }
                    ROOT = {
                        capital_scope = {
                            add_dynamic_modifier = {
                                modifier = quarters_location_modifier
                            }
                        }
                        add_to_array = { global.module_two_builder_array = THIS.id }
                    }
                }
                if = {
                    limit = {
                        any_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = support_location_modifier
                                }
                                controller = {
                                    is_puppet_of = ROOT
                                }
                            }
                        }
                    }
                    every_country = {
                        limit = {
                            is_puppet_of = ROOT
                        }
                        every_owned_state = {
                            remove_dynamic_modifier = { modifier = support_location_modifier }
                        }
                        remove_from_array = { global.module_three_builder_array = THIS.id }
                    }
                    ROOT = {
                        capital_scope = {
                            add_dynamic_modifier = {
                                modifier = support_location_modifier
                            }
                        }
                        add_to_array = { global.module_three_builder_array = THIS.id }
                    }
                }
                if = {
                    limit = {
                        any_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = storage_location_modifier
                                }
                                controller = {
                                    is_puppet_of = ROOT
                                }
                            }
                        }
                    }
                    every_country = {
                        limit = {
                            is_puppet_of = ROOT
                        }
                        every_owned_state = {
                            remove_dynamic_modifier = { modifier = storage_location_modifier }
                        }
                        remove_from_array = { global.module_four_builder_array = THIS.id }
                    }
                    ROOT = {
                        capital_scope = {
                            add_dynamic_modifier = {
                                modifier = storage_location_modifier
                            }
                        }
                        add_to_array = { global.module_four_builder_array = THIS.id }
                    }
                }
                if = {
                    limit = {
                        any_state = {
                            AND = {
                                has_dynamic_modifier = {
                                    modifier = engine_location_modifier
                                }
                                controller = {
                                    is_puppet_of = ROOT
                                }
                            }
                        }
                    }
                    every_country = {
                        limit = {
                            is_puppet_of = ROOT
                        }
                        every_owned_state = {
                            remove_dynamic_modifier = { modifier = engine_location_modifier }
                        }
                        remove_from_array = { global.module_five_builder_array = THIS.id }
                    }
                    ROOT = {
                        capital_scope = {
                            add_dynamic_modifier = {
                                modifier = engine_location_modifier
                            }
                        }
                        add_to_array = { global.module_five_builder_array = THIS.id }
                    }
                }
                ###
                if = {
                    limit = {
                        check_variable = { spaceship_completion_time < 1 }
                        NOT = {
                            any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
                            any_owned_state = {
                                has_dynamic_modifier = {
                                    modifier = spaceship_location_modifier
                                }
                            }
                        }
                    }
                    if = {
                        limit = {
                            NOT = {
                                has_global_flag = module_1_completed_flag
                            }
                        }
                        news_event = international_news_event.1
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_global_flag = module_2_completed_flag
                            }
                        }
                        news_event = international_news_event.2
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_global_flag = module_3_completed_flag
                            }
                        }
                        news_event = international_news_event.3
                    }
                    else_if = {
                        limit = {
                            NOT = {
                                has_global_flag = module_4_completed_flag
                            }
                        }
                        news_event = international_news_event.4
                    }
                    else = {
                        news_event = international_news_event.5
                    }
                    #country_event = { id = international_event.21 }
                    every_country = {
                        set_variable = { spaceship_completion_time = 730 }
                    }
                }
                subtract_from_variable = { spaceship_completion_time = 1 }
            }
            else = {
                #
            }            
        }
    }
    ###
    on_weekly_ADU = {
        effect = {
            if = {
                limit = {
                    NOT = {
                        OR = {
                            has_global_flag = spaceship_already_internationalized
                            has_global_flag = spaceship_launched_already
                        }
                    }
                }
                every_country = {
                    limit = {
                        has_country_flag = international_member
                    }
                    set_variable = { spaceship_contribution_variable = 0 }
                    set_variable = { spaceship_contribution_civilian = num_of_civilian_factories }
                    set_variable = { spaceship_contribution_military = num_of_military_factories }
                    set_variable = { spaceship_contribution_dockyard = num_of_naval_factories }
    
                    #SPACESHIP BUILDING
                    set_variable = { spaceship_contribution_spaceship_factory = 0 }
                    every_controlled_state = {
                        add_to_variable = { PREV.spaceship_contribution_spaceship_factory = building_level@spaceship_factory }
                    }
                    multiply_variable = { spaceship_contribution_spaceship_factory = 20 }
                    add_to_variable = { spaceship_contribution_variable = spaceship_contribution_spaceship_factory }
                    ###
    
                    multiply_variable = { spaceship_contribution_civilian = 2 }
                    multiply_variable = { spaceship_contribution_military = 1 }
                    add_to_variable = { spaceship_contribution_variable = spaceship_contribution_civilian }
                    add_to_variable = { spaceship_contribution_variable = spaceship_contribution_military }
                    add_to_variable = { spaceship_contribution_variable = spaceship_contribution_dockyard }
                    set_variable = { spaceship_contribution_modifier = 1 }
                    if = {
                        limit = {
                            has_country_flag = progress_two
                        }
                        add_to_variable = { spaceship_contribution_modifier = 0.1 }
                    }
                    #if = {
                    #    limit = {
                    #        has_idea = ai_concern_orbitalforces
                    #    }
                    #    add_to_variable = { spaceship_contribution_modifier = 0.1 }
                    #}
                    if = {
                        limit = {
                            has_idea = stellar_codex_idea
                        }
                        add_to_variable = { spaceship_contribution_modifier = 0.25 }
                    }
                    #if = {
                    #    limit = {
                    #        has_idea = continuous_future_technology
                    #    }
                    #    add_to_variable = { spaceship_contribution_modifier = 0.2 }
                    #}
                    if = {
                        limit = {
                            has_idea = research_resolution_idea4
                        }
                        add_to_variable = { spaceship_contribution_modifier = 0.2 }
                    }
                    if = {
                        limit = {
                            has_idea = research_resolution_idea5
                        }
                        add_to_variable = { spaceship_contribution_modifier = 0.4 }
                    }
                    if = {
                        limit = {
                            has_idea = KAZ_baikonur_cosmodrome
                        }
                        add_to_variable = { spaceship_contribution_modifier = 0.1 }
                    }
                    multiply_variable = { spaceship_contribution_variable = spaceship_contribution_modifier }
                }
            }
            else = {
                #
            }            
        }
    }
}