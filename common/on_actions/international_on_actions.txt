on_actions = {
    on_startup = {
        effect = {
            every_country = {
                set_variable = { spaceschip_completion_time = 181 }
                set_variable = { spaceship_contribution_variable = 0 }
                set_variable = { spaceship_contribution_civilian = num_of_civilian_factories }
                set_variable = { spaceship_contribution_military = num_of_military_factories }
                set_variable = { spaceship_contribution_dockyard = num_of_naval_factories }
                multiply_variable = { spaceship_contribution_civilian = 4 }
                multiply_variable = { spaceship_contribution_military = 2 }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_civilian }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_military }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_dockyard }
            }
            #if = {
            #    limit = {
            #        NOT = {
            #            any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
            #        }
            #    }
            #    ROOT = {
            #        add_to_array = { global.spaceship_contribution_array = THIS.id }
            #    }
            #}
        }
    }
    on_daily = {
        effect = {
            #if = {
            #    limit = {
            #        any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
            #    }
            #    ROOT = {
            #        remove_from_array = { global.spaceship_contribution_array = THIS.id }
            #    }
            #}
            #if = {
            #    limit = {
            #        NOT = {
            #            any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
            #        }
            #    }
            #    ROOT = {
            #        add_to_array = { global.spaceship_contribution_array = THIS.id }
            #    }
            #}
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = bridge_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = bridge_location_modifier }
                    }
                    remove_from_array = { global.module_one_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = bridge_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_one_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = quarters_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = quarters_location_modifier }
                    }
                    remove_from_array = { global.module_two_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = quarters_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_two_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = support_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = support_location_modifier }
                    }
                    remove_from_array = { global.module_three_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = support_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_three_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = storage_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = storage_location_modifier }
                    }
                    remove_from_array = { global.module_four_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = storage_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_four_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = engine_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = engine_location_modifier }
                    }
                    remove_from_array = { global.module_five_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = engine_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_five_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = bridge_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = bridge_location_modifier }
                    }
                    remove_from_array = { global.module_one_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = bridge_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_one_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = quarters_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = quarters_location_modifier }
                    }
                    remove_from_array = { global.module_two_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = quarters_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_two_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = support_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = support_location_modifier }
                    }
                    remove_from_array = { global.module_three_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = support_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_three_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = storage_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = storage_location_modifier }
                    }
                    remove_from_array = { global.module_four_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = storage_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_four_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = engine_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = engine_location_modifier }
                    }
                    remove_from_array = { global.module_five_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = engine_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_five_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    AND = {
                        check_variable = { spaceschip_completion_time = 1 }
			            NOT = {
                            any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
                            any_owned_state = {
                                has_dynamic_modifier = {
                                    modifier = spaceship_location_modifier
                                }
                            }
                        }
                    }
                }
                country_event = { id = international_event.21 } 
            }
            #if = {
            #    limit = {
            #        AND = {
            #            check_variable = { spaceschip_completion_time = 1 }
            #            any_owned_state = {
            #                has_dynamic_modifier = {
            #                    modifier = spaceship_location_modifier
            #                }
            #            }
            #        }
            #    }
            #    country_event = { id = international_event.23 } 
            #}
            subtract_from_variable = { spaceschip_completion_time = 1 }
            every_country = {
                set_variable = { spaceship_contribution_variable = 0 }
                set_variable = { spaceship_contribution_civilian = num_of_civilian_factories }
                set_variable = { spaceship_contribution_military = num_of_military_factories }
                set_variable = { spaceship_contribution_dockyard = num_of_naval_factories }
                multiply_variable = { spaceship_contribution_civilian = 4 }
                multiply_variable = { spaceship_contribution_military = 2 }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_civilian }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_military }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_dockyard }
                if = {
                    limit = {
                        has_idea = ai_concern_orbitalforces
                    }

                    add_to_variable ={spaceship_contribution_variable = 0.1}
                }
                if = {
                    limit = {
                        has_idea = stellar_codex_idea
                    }
                    multiply_variable = { spaceship_contribution_variable = 1.25 }
                }
            }
        }
    }
}