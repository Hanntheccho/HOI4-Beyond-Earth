on_actions = {
    on_startup = {
        effect = {
            every_country = {
                set_variable = { spaceschip_completion_time = 180 }
                set_variable = { spaceship_contribution_variable = 0 }
                set_variable = { spaceship_contribution_modifier = 1 }
                set_variable = { spaceship_contribution_civilian = num_of_civilian_factories }
                set_variable = { spaceship_contribution_military = num_of_military_factories }
                set_variable = { spaceship_contribution_dockyard = num_of_naval_factories }
                multiply_variable = { spaceship_contribution_civilian = 4 }
                multiply_variable = { spaceship_contribution_military = 2 }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_civilian }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_military }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_dockyard }
                multiply_variable = { spaceship_contribution_variable = spaceship_contribution_modifier }
                set_variable = { final_war_timer = 2057 }
            }
            #if = {
            #    limit = {
            #        NOT = {
            #            any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
            #        }
            #    }
            #    ROOT = {
            #        add_to_array = { global.spaceship_contribution_array = THIS.id }
            #    }
            #}
            set_global_flag = module_1_under_construction_flag
        }
    }
    on_daily = {
        effect = {
            subtract_from_variable = { final_war_timer = 1 }
            if = {
                limit = {
                    AND = {
                        check_variable = { final_war_timer = 1 }
                        spaceship_completely_internationalized = no
                    }
                }
                ROOT = {
		            news_event = { id = international_news_event.9 days = 0 }
                }
            }
            #if = {
            #    limit = {
            #        any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
            #    }
            #    ROOT = {
            #        remove_from_array = {
            #            array = <name>
            #            value = <value>
            #            index = <index>
            #        }
            #    }
            #}
            if = {
                limit = {
                    NOT = {
                        any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
                    }
                }
                ROOT = {
                    add_to_array = {
                        array = global.spaceship_contribution_array
                        value = THIS.id
                        index = 0
                    }
                }
            }
            if = {
                limit = {
                    AND = {
                        spaceship_completely_internationalized = yes
                        date < 2205.8.11
                    }
                }
                set_global_flag = internationalized_spaceship
		        news_event = { id = international_news_event.8 days = 0 }
            }
            if = {
                limit = {
                    date < 2200.1.2
                    date > 2200.1.4
                }
		        news_event = { id = international_news_event.8 days = 0 }
            }
            if = {
                limit = {
                    any_owned_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = bridge_location_modifier
                            }
                        }
                    }
                }
                ROOT = {
                    add_to_array = {
                        array = global.module_one_builder_array
                        value = THIS.id
                        index = 0
                    }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = bridge_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = bridge_location_modifier }
                    }
                    remove_from_array = { global.module_one_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = bridge_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_one_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = quarters_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = quarters_location_modifier }
                    }
                    remove_from_array = { global.module_two_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = quarters_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_two_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = support_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = support_location_modifier }
                    }
                    remove_from_array = { global.module_three_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = support_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_three_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = storage_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = storage_location_modifier }
                    }
                    remove_from_array = { global.module_four_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = storage_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_four_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = engine_location_modifier
                            }
                            controller = {
                                is_puppet_of = ROOT
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        is_puppet_of = ROOT
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = engine_location_modifier }
                    }
                    remove_from_array = { global.module_five_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = engine_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_five_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = bridge_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = bridge_location_modifier }
                    }
                    remove_from_array = { global.module_one_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = bridge_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_one_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = quarters_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = quarters_location_modifier }
                    }
                    remove_from_array = { global.module_two_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = quarters_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_two_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = support_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = support_location_modifier }
                    }
                    remove_from_array = { global.module_three_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = support_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_three_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = storage_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = storage_location_modifier }
                    }
                    remove_from_array = { global.module_four_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = storage_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_four_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    any_state = {
                        AND = {
                            has_dynamic_modifier = {
                                modifier = engine_location_modifier
                            }
                            controller = {
                                AND = {
                                    is_in_faction_with = ROOT
                                    is_faction_leader = no
                                }
                            }
                        }
                    }
                }
                every_country = {
                    limit = {
                        AND = {
                            is_in_faction_with = ROOT
                            is_faction_leader = no
                        }
                    }
                    every_owned_state = {
                        remove_dynamic_modifier = { modifier = engine_location_modifier }
                    }
                    remove_from_array = { global.module_five_builder_array = THIS.id }
                }
                every_owned_state = {
                    limit = {
                        is_capital = yes
                    }
                    add_dynamic_modifier = {
                        modifier = engine_location_modifier
                    }
                }
                ROOT = {
                    add_to_array = { global.module_five_builder_array = THIS.id }
                }
            }
            if = {
                limit = {
                    AND = {
                        check_variable = { spaceschip_completion_time = 1 }
			            NOT = {
                            any_other_country = { check_variable = { spaceship_contribution_variable > ROOT.spaceship_contribution_variable } }
                            any_owned_state = {
                                has_dynamic_modifier = {
                                    modifier = spaceship_location_modifier
                                }
                            }
                        }
                    }
                }
                country_event = { id = international_event.21 } 
            }
            #if = {
            #    limit = {
            #        AND = {
            #            check_variable = { spaceschip_completion_time = 1 }
            #            any_owned_state = {
            #                has_dynamic_modifier = {
            #                    modifier = spaceship_location_modifier
            #                }
            #            }
            #        }
            #    }
            #    country_event = { id = international_event.23 } 
            #}
            subtract_from_variable = { spaceschip_completion_time = 1 }
            every_country = {
                set_variable = { spaceship_contribution_variable = 0 }
                set_variable = { spaceship_contribution_civilian = num_of_civilian_factories }
                set_variable = { spaceship_contribution_military = num_of_military_factories }
                set_variable = { spaceship_contribution_dockyard = num_of_naval_factories }
                multiply_variable = { spaceship_contribution_civilian = 4 }
                multiply_variable = { spaceship_contribution_military = 2 }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_civilian }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_military }
                add_to_variable = { spaceship_contribution_variable = spaceship_contribution_dockyard }
                set_variable = { spaceship_contribution_modifier = 1 }
                if = {
                    limit = {
                        has_country_flag = progress_two
                    }
                    add_to_variable = { spaceship_contribution_modifier = 0.1 }
                }
                multiply_variable = { spaceship_contribution_variable = spaceship_contribution_modifier }
                #if = {
                #    limit = {
                #        has_idea = ai_concern_orbitalforces
                #    }
#
                #    add_to_variable ={spaceship_contribution_variable = 0.1}
                #}
                if = {
                    limit = {
                        has_idea = stellar_codex_idea
                    }
                    multiply_variable = { spaceship_contribution_variable = 1.25 }
                }
            }
        }
    }
}