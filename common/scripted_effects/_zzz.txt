balkanize_that = {
	ROOT = {
		if = {
			limit = {
				tag = SOV #not a cosmetic tag, but should be balkanized too
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = SIB
						is_core_of = KAZ
						is_core_of = UKR
						is_core_of = BLR
						is_core_of = URA
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				tag = AST #not a cosmetic tag, but should be balkanized too
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = SHL
						is_core_of = NZL
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				tag = EGY #not a cosmetic tag, but should be balkanized too
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = LBA
						is_core_of = SUD
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				tag = YUG #not a cosmetic tag, but should be balkanized too
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = BUL
						is_core_of = ALB
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				tag = PRU #not a cosmetic tag, but should be balkanized too
			}
			every_state = {
				limit = {
					is_core_of = BOL
					is_core_of = LAM
					is_core_of = BRA
					is_core_of = CHL
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				OR = {
					has_cosmetic_tag = FRA_UNION
					has_cosmetic_tag = FRA_eu_union
					has_cosmetic_tag = FRA_med_fed
					has_cosmetic_tag = FRA_lys_rep
					tag = FRA
				}
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = IRE
						is_core_of = ENG
						is_core_of = SCO
						is_core_of = SPR
						is_core_of = PAD
						is_core_of = ITA
						is_core_of = TUN
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				OR = {
					tag = COL
					has_cosmetic_tag = COL_bolivaria
				}
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = VEN
						is_core_of = LAM
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				OR = {
					has_cosmetic_tag = CHI_SCO
					has_cosmetic_tag = CHI_SCO_united
					has_cosmetic_tag = CHI_CENTRAL_GOVERNMENT
				}
			}
			every_possible_country = {
				limit = {
					is_china_tag = yes
					NOT = {
						tag = CHI
					}
				}
				every_state = {
					limit = {
						is_core_of = PREV
					}
					remove_core_of = ROOT
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_cosmetic_tag = SCO_NSA
					has_cosmetic_tag = SCO_EU
				}
			}
			every_possible_country = {
				limit = {
					OR = {
						is_nsa_tag = yes
						tag = SPR
						tag = FRA
						tag = GER
					}
					NOT = {
						tag = SCO
					}
				}
				every_state = {
					limit = {
						is_core_of = PREV
					}
					remove_core_of = ROOT
				}
			}
		}
		else_if = {
			limit = {
				has_cosmetic_tag = INDIA_kavithan_protectorate
			}
			every_possible_country = {
				limit = {
					OR = {
						is_india_tag = yes
						tag = KAV
						tag = NEP
					}
				}
				every_state = {
					limit = {
						is_core_of = PREV
					}
					remove_core_of = ROOT
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					has_cosmetic_tag = BRA_brasilia
					has_cosmetic_tag = BRA_fed
					tag = BRA
				}
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = URG
						is_core_of = COL
						is_core_of = BOL
						is_core_of = PRU
						is_core_of = VEN
						is_core_of = GYA
						is_core_of = NCB
						is_core_of = SCB
						is_core_of = ECB
						is_core_of = LAM
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				OR = {
					has_cosmetic_tag = NAU_united
					has_cosmetic_tag = USA_united #should remove more cores and reorg CAN, but since it is not meant for the AI...
				}
			}
			every_possible_country = {
				limit = {
					OR = {
						is_nau_tag = yes
						if = {
							limit = {
								ROOT = {
									tag = PNM
								}
							}
							tag = ARC
						}
						else_if = {
							limit = {
								ROOT = {
									tag = ARC
								}
							}
							tag = PNM
						}
						else = {
							OR = {
								tag = PNM
								tag = ARC
							}
						}
					}
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = PREV
							is_core_of = MEX
							is_core_of = QUE
						}
					}
					remove_core_of = ROOT
				}
			}
		}
		else_if = {
			limit = {
				has_cosmetic_tag = GRB_UNION
			}
			every_state = {
				limit = {
					is_core_of = SCO
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				has_cosmetic_tag = LAT_UNION
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = LIT
						is_core_of = POL
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				has_cosmetic_tag = PAD_italy
			}
			every_state = {
				limit = {
					is_core_of = ITA
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				OR = {
					has_cosmetic_tag = TZN_AFRICA
					tag = TZN #not a cosmetic tag, but should be balkanized too
				}
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = COG
						is_core_of = ANG
						is_core_of = SAF
						is_core_of = ZAM
						is_core_of = GNB
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				has_cosmetic_tag = OMA_al_falah
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = SAU
						is_core_of = SYR
						is_core_of = YEM
						is_core_of = QAT
						is_core_of = LEB
						is_core_of = ISR
						is_core_of = PAL
						is_core_of = TUR
						is_core_of = EGY
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				has_cosmetic_tag = INS_polystralia
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = AST
						is_core_of = SHL
					}
				}
				remove_core_of = ROOT
			}
		}
		else_if = {
			limit = {
				is_puppet_of = ONU
			}
			every_possible_country = {
				limit = {
					NOT = {
						tag = ROOT
					}
				}
				every_core_state = {
					remove_core_of = ROOT
				}
			}
		}
		else = {
			#
		}
		drop_cosmetic_tag = yes
	}
}

color_that = {
	if = {
		limit = {
			THIS.OVERLORD = {
				OR = {
					is_nau_tag = yes
					tag = PNM
					tag = ARC
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					global.NAUcolor = 0
				}
			}
			set_variable = {
				global.NAUcolor = 1
			}
			set_cosmetic_tag = NAU1
		}
		else_if = {
			limit = {
				check_variable = {
					global.NAUcolor = 1
				}
			}
			set_variable = {
				global.NAUcolor = 2
			}
			set_cosmetic_tag = NAU2
		}
		else_if = {
			limit = {
				check_variable = {
					global.NAUcolor = 2
				}
			}
			set_variable = {
				global.NAUcolor = 3
			}
			set_cosmetic_tag = NAU3
		}
		else_if = {
			limit = {
				check_variable = {
					global.NAUcolor = 3
				}
			}
			set_variable = {
				global.NAUcolor = 4
			}
			set_cosmetic_tag = NAU4
		}
		else = {
			set_variable = {
				global.NAUcolor = 0
			}
			set_cosmetic_tag = NAU5
		}
	}
	else_if = {
		limit = {
			THIS.OVERLORD = {
				tag = BRA
			}
		}
		if = {
			limit = {
				check_variable = {
					global.BRAcolor = 0
				}
			}
			set_variable = {
				global.BRAcolor = 1
			}
			set_cosmetic_tag = BRA1
		}
		else_if = {
			limit = {
				check_variable = {
					global.BRAcolor = 1
				}
			}
			set_variable = {
				global.BRAcolor = 2
			}
			set_cosmetic_tag = BRA2
		}
		else_if = {
			limit = {
				check_variable = {
					global.BRAcolor = 2
				}
			}
			set_variable = {
				global.BRAcolor = 3
			}
			set_cosmetic_tag = BRA3
		}
		else_if = {
			limit = {
				check_variable = {
					global.BRAcolor = 3
				}
			}
			set_variable = {
				global.BRAcolor = 4
			}
			set_cosmetic_tag = BRA4
		}
		else = {
			set_variable = {
				global.BRAcolor = 0
			}
			set_cosmetic_tag = BRA5
		}
	}
	else_if = {
		limit = {
			THIS.OVERLORD = {
				OR = {
					is_china_tag = yes
					tag = CHI
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					global.CHIcolor = 0
				}
			}
			set_variable = {
				global.CHIcolor = 1
			}
			set_cosmetic_tag = CHI1
		}
		else_if = {
			limit = {
				check_variable = {
					global.CHIcolor = 1
				}
			}
			set_variable = {
				global.CHIcolor = 2
			}
			set_cosmetic_tag = CHI2
		}
		else_if = {
			limit = {
				check_variable = {
					global.CHIcolor = 2
				}
			}
			set_variable = {
				global.CHIcolor = 3
			}
			set_cosmetic_tag = CHI3
		}
		else_if = {
			limit = {
				check_variable = {
					global.CHIcolor = 3
				}
			}
			set_variable = {
				global.CHIcolor = 4
			}
			set_cosmetic_tag = CHI4
		}
		else = {
			set_variable = {
				global.CHIcolor = 0
			}
			set_cosmetic_tag = CHI5
		}
	}
	else_if = {
		limit = {
			THIS.OVERLORD = {
				OR = {
					is_india_tag = yes
					tag = BHR
					tag = KAV
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					global.KAVcolor = 0
				}
			}
			set_variable = {
				global.KAVcolor = 1
			}
			set_cosmetic_tag = KAV1
		}
		else_if = {
			limit = {
				check_variable = {
					global.KAVcolor = 1
				}
			}
			set_variable = {
				global.KAVcolor = 2
			}
			set_cosmetic_tag = KAV2
		}
		else_if = {
			limit = {
				check_variable = {
					global.KAVcolor = 2
				}
			}
			set_variable = {
				global.KAVcolor = 3
			}
			set_cosmetic_tag = KAV3
		}
		else_if = {
			limit = {
				check_variable = {
					global.KAVcolor = 3
				}
			}
			set_variable = {
				global.KAVcolor = 4
			}
			set_cosmetic_tag = KAV4
		}
		else = {
			set_variable = {
				global.KAVcolor = 0
			}
			set_cosmetic_tag = KAV5
		}
	}
	else_if = {
		limit = {
			THIS.OVERLORD = {
				tag = TZN
			}
		}
		if = {
			limit = {
				check_variable = {
					global.TZNcolor = 0
				}
			}
			set_variable = {
				global.TZNcolor = 1
			}
			set_cosmetic_tag = TZN1
		}
		else_if = {
			limit = {
				check_variable = {
					global.TZNcolor = 1
				}
			}
			set_variable = {
				global.TZNcolor = 2
			}
			set_cosmetic_tag = TZN2
		}
		else_if = {
			limit = {
				check_variable = {
					global.TZNcolor = 2
				}
			}
			set_variable = {
				global.TZNcolor = 3
			}
			set_cosmetic_tag = TZN3
		}
		else_if = {
			limit = {
				check_variable = {
					global.TZNcolor = 3
				}
			}
			set_variable = {
				global.TZNcolor = 4
			}
			set_cosmetic_tag = TZN4
		}
		else = {
			set_variable = {
				global.TZNcolor = 0
			}
			set_cosmetic_tag = TZN5
		}
	}
	else_if = {
		limit = {
			THIS.OVERLORD = {
				tag = SOV
			}
		}
		if = {
			limit = {
				check_variable = {
					global.SOVcolor = 0
				}
			}
			set_variable = {
				global.SOVcolor = 1
			}
			set_cosmetic_tag = SOV1
		}
		else_if = {
			limit = {
				check_variable = {
					global.SOVcolor = 1
				}
			}
			set_variable = {
				global.SOVcolor = 2
			}
			set_cosmetic_tag = SOV2
		}
		else_if = {
			limit = {
				check_variable = {
					global.SOVcolor = 2
				}
			}
			set_variable = {
				global.SOVcolor = 3
			}
			set_cosmetic_tag = SOV3
		}
		else_if = {
			limit = {
				check_variable = {
					global.SOVcolor = 3
				}
			}
			set_variable = {
				global.SOVcolor = 4
			}
			set_cosmetic_tag = SOV4
		}
		else = {
			set_variable = {
				global.SOVcolor = 0
			}
			set_cosmetic_tag = SOV5
		}
	}
	#else_if = {
	#	limit = {
	#		THIS.OVERLORD = {
	#			tag = FRA
	#		}
	#	}
	#	if = {
	#		limit = {
	#			check_variable = {
	#				global.FRAcolor = 0
	#			}
	#		}
	#		set_variable = {
	#			global.FRAcolor = 1
	#		}
	#		set_cosmetic_tag = FRA1
	#	}
	#	else_if = {
	#		limit = {
	#			check_variable = {
	#				global.FRAcolor = 1
	#			}
	#		}
	#		set_variable = {
	#			global.FRAcolor = 2
	#		}
	#		set_cosmetic_tag = FRA2
	#	}
	#	else_if = {
	#		limit = {
	#			check_variable = {
	#				global.FRAcolor = 2
	#			}
	#		}
	#		set_variable = {
	#			global.FRAcolor = 3
	#		}
	#		set_cosmetic_tag = FRA3
	#	}
	#	else_if = {
	#		limit = {
	#			check_variable = {
	#				global.FRAcolor = 3
	#			}
	#		}
	#		set_variable = {
	#			global.FRAcolor = 4
	#		}
	#		set_cosmetic_tag = FRA4
	#	}
	#	else = {
	#		set_variable = {
	#			global.FRAcolor = 0
	#		}
	#		set_cosmetic_tag = FRA5
	#	}
	#}
	else_if = {
		limit = {
			THIS.OVERLORD = {
				tag = OMA
			}
			NOT = { #they already use the color scheme
				THIS = {
					OR = {
						tag = YEM
						tag = SAU
						tag = QAT
						tag = SYR
						tag = LEB
					}
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					global.OMAcolor = 0
				}
			}
			set_variable = {
				global.OMAcolor = 1
			}
			set_cosmetic_tag = OMA1
		}
		else_if = {
			limit = {
				check_variable = {
					global.OMAcolor = 1
				}
			}
			set_variable = {
				global.OMAcolor = 2
			}
			set_cosmetic_tag = OMA2
		}
		else_if = {
			limit = {
				check_variable = {
					global.OMAcolor = 2
				}
			}
			set_variable = {
				global.OMAcolor = 3
			}
			set_cosmetic_tag = OMA3
		}
		else_if = {
			limit = {
				check_variable = {
					global.OMAcolor = 3
				}
			}
			set_variable = {
				global.OMAcolor = 4
			}
			set_cosmetic_tag = OMA4
		}
		else = {
			set_variable = {
				global.OMAcolor = 0
			}
			set_cosmetic_tag = OMA5
		}
	}
	else_if = {
		limit = {
			THIS.OVERLORD = {
				tag = SCO
			}
		}
		if = {
			limit = {
				check_variable = {
					global.SCOcolor = 0
				}
			}
			set_variable = {
				global.SCOcolor = 1
			}
			set_cosmetic_tag = SCO1
		}
		else_if = {
			limit = {
				check_variable = {
					global.SCOcolor = 1
				}
			}
			set_variable = {
				global.SCOcolor = 2
			}
			set_cosmetic_tag = SCO2
		}
		else_if = {
			limit = {
				check_variable = {
					global.SCOcolor = 2
				}
			}
			set_variable = {
				global.SCOcolor = 3
			}
			set_cosmetic_tag = SCO3
		}
		else_if = {
			limit = {
				check_variable = {
					global.SCOcolor = 3
				}
			}
			set_variable = {
				global.SCOcolor = 4
			}
			set_cosmetic_tag = SCO4
		}
		else = {
			set_variable = {
				global.SCOcolor = 0
			}
			set_cosmetic_tag = SCO5
		}
	}
	else_if = {
		limit = {
			THIS.OVERLORD = {
				tag = ONU
			}
		}
		if = {
			limit = {
				check_variable = {
					global.ONUcolor = 0
				}
			}
			set_variable = {
				global.ONUcolor = 1
			}
			set_cosmetic_tag = ONU1
		}
		else_if = {
			limit = {
				check_variable = {
					global.ONUcolor = 1
				}
			}
			set_variable = {
				global.ONUcolor = 2
			}
			set_cosmetic_tag = ONU2
		}
		else_if = {
			limit = {
				check_variable = {
					global.ONUcolor = 2
				}
			}
			set_variable = {
				global.ONUcolor = 3
			}
			set_cosmetic_tag = ONU3
		}
		else_if = {
			limit = {
				check_variable = {
					global.ONUcolor = 3
				}
			}
			set_variable = {
				global.ONUcolor = 4
			}
			set_cosmetic_tag = ONU4
		}
		else = {
			set_variable = {
				global.ONUcolor = 0
			}
			set_cosmetic_tag = ONU5
		}
	}
	else = {
		#
	}
}
