scripted_gui = {
	remove_superbug_gui = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		
		window_name = "remove_superbug_gui_window"
		
		visible = {
            THIS = {
                OR = {
                    has_dynamic_modifier = {
                        modifier = superbug_high
                    }
                    has_dynamic_modifier = {
                        modifier = superbug_medium
                    }
                    has_dynamic_modifier = {
                        modifier = superbug_low
                    }    
                }
            }
		}
		
		effects = {
			remove_superbug_button_click = {
                THIS = {
                    if = {
                        limit = {
                            has_dynamic_modifier = {
                                modifier = superbug_high
                            }
                        }
                        remove_dynamic_modifier = {
                            modifier = superbug_high
                        }
                        add_dynamic_modifier = {
                            modifier = superbug_medium
                        }
                        set_state_flag = {
                            flag = vax_overdosis_flag
                            value = 1
                            days = 180
                        }
                    }
                    else_if = {
                        limit = {
                            has_dynamic_modifier = {
                                modifier = superbug_medium
                            }
                        }
                        remove_dynamic_modifier = {
                            modifier = superbug_medium
                        }
                        add_dynamic_modifier = {
                            modifier = superbug_low
                        }
                        set_state_flag = {
                            flag = vax_overdosis_flag
                            value = 1
                            days = 180
                        }
                    }
                    else = {
                        remove_dynamic_modifier = {
                            modifier = superbug_low
                        }
                    }
                }
                ROOT = {
                    subtract_from_variable = { industrial_power = 25 } 
                }
			}
		}
        triggers = {
            remove_superbug_button_click_enabled = {
                THIS = {
                    is_fully_controlled_by = ROOT
                    NOT = {
                        has_state_flag = vax_overdosis_flag
                    }
                }
                ROOT = { 
                    check_variable = {
                	    var = industrial_power
                	    value = 25
                	    compare = greater_than_or_equals
                    }
                }
                has_global_flag = vax_moment
            }
        }
	}
}