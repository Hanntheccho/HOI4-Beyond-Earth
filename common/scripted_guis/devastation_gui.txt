scripted_gui = {
	devastation_gui = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		
		window_name = "devastation_gui_window"
		
		visible = {
            always = yes
		}
		
		effects = {
			reduce_devastation_button_click = {
                THIS = {
                    decrease_devastation = yes
                    set_state_flag = {
                        flag = devastation_reduction_timeout_flag
                        value = 1
                        days = 60
                    }
                }
                ROOT = {
                    subtract_from_variable = { industrial_power = 25 }
		            subtract_from_variable = { current_devastation = 1 }
                }
			}
		}
        triggers = {
            reduce_devastation_button_click_enabled = {
                THIS = {
                    is_owned_by = ROOT
                    OR = {
                        has_dynamic_modifier = {
                            modifier = notable_devastation
                        }
                        has_dynamic_modifier = {
                            modifier = major_devastation
                        }
                        has_dynamic_modifier = {
                            modifier = significant_devastation
                        }
                        has_dynamic_modifier = {
                            modifier = terminal_devastation
                        }
                    }
                    NOT = {
                        has_state_flag = devastation_reduction_timeout_flag
                    }
                    NOT = {
                        ROOT = {
                            has_idea = the_final_war_idea
                        }
                    }
                }
                ROOT = { 
                    check_variable = {
                	    var = industrial_power
                	    value = 25
                	    compare = greater_than_or_equals
                    }
                }
            }
        }

        ai_enabled = {
            always = yes
        }

        ai_test_interval = 300

        ai_check = {
            check_variable = {
                industrial_power > 25
            }
		}

        ai_weights = {
            reduce_devastation_button_click = {
                ai_will_do = {
                    factor = 0
                    modifier = {
			        	add = 1
                        check_variable = {
                            industrial_power > 500
                        }
			        }
                }
            }
        }
	}

    devastation_gui_tooltip = {
		context_type = selected_country_context
		parent_window_token = selected_state_view
		
		window_name = "devastation_gui_window_tooltip"
		
		visible = {
            always = yes
		}
    }
}