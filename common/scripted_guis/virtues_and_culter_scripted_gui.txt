scripted_gui = {
    
    virtues_and_culture_stuff = {
        window_name = "virtues_and_culture_stuff"
        context_type = player_context
		#parent_window_token = top_bar
         
        visible = {
            if = {
                limit = {
                    is_ai = yes
                }
                always = yes
            }
            else = {
                has_country_flag = virtues_and_culture_moment_flag
            }
        }
        
        effects = {
            virtues_and_culture_close_click = {
                ROOT = {
                    clr_country_flag = virtues_and_culture_moment_flag
                }
            }
            hostility_button_click = {
                if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_hostility_tier1
                            }
                        }
                    }
                    set_country_flag = has_hostility_tier1
                    add_dynamic_modifier = {
                        modifier = hostility_tier1_modifier
                    }
                    subtract_from_variable = { cultural_power = 150 }
                    add_popularity = {
                        ideology = purity
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_hostility_tier2
                            }
                        }
                    }
                    set_country_flag = has_hostility_tier2
                    add_dynamic_modifier = {
                        modifier = hostility_tier2_modifier
                    }
                    subtract_from_variable = { cultural_power = 200 }
                    add_popularity = {
                        ideology = purity
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_hostility_tier3
                            }
                        }
                    }
                    set_country_flag = has_hostility_tier3
                    add_dynamic_modifier = {
                        modifier = hostility_tier3_modifier
                    }
                    subtract_from_variable = { cultural_power = 300 }
                    add_popularity = {
                        ideology = purity
                        popularity = 0.05
                    }
                }
                else = {

                }
            }
            benevolence_button_click = {
                if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_benevolence_tier1
                            }
                        }
                    }
                    set_country_flag = has_benevolence_tier1
                    add_dynamic_modifier = {
                        modifier = benevolence_tier1_modifier
                    }
                    subtract_from_variable = { cultural_power = 150 }
                    add_popularity = {
                        ideology = voracity
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_benevolence_tier2
                            }
                        }
                    }
                    set_country_flag = has_benevolence_tier2
                    add_dynamic_modifier = {
                        modifier = benevolence_tier2_modifier
                    }
                    subtract_from_variable = { cultural_power = 200 }
                    add_popularity = {
                        ideology = voracity
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_benevolence_tier3
                            }
                        }
                    }
                    set_country_flag = has_benevolence_tier3
                    add_dynamic_modifier = {
                        modifier = benevolence_tier3_modifier
                    }
                    subtract_from_variable = { cultural_power = 300 }
                    add_popularity = {
                        ideology = voracity
                        popularity = 0.05
                    }
                }
                else = {

                }
            }
            tradition_button_click = {
                if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_tradition_tier1
                            }
                        }
                    }
                    set_country_flag = has_tradition_tier1
                    add_dynamic_modifier = {
                        modifier = tradition_tier1_modifier
                    }
                    subtract_from_variable = { cultural_power = 150 }
                    add_popularity = {
                        ideology = supremacy
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_tradition_tier2
                            }
                        }
                    }
                    set_country_flag = has_tradition_tier2
                    add_dynamic_modifier = {
                        modifier = tradition_tier2_modifier
                    }
                    subtract_from_variable = { cultural_power = 200 }
                    add_popularity = {
                        ideology = supremacy
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_tradition_tier3
                            }
                        }
                    }
                    set_country_flag = has_tradition_tier3
                    add_dynamic_modifier = {
                        modifier = tradition_tier3_modifier
                    }
                    subtract_from_variable = { cultural_power = 300 }
                    add_popularity = {
                        ideology = supremacy
                        popularity = 0.05
                    }
                }
                else = {

                }
            }
            progress_button_click = {
                if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_progress_tier1
                            }
                        }
                    }
                    set_country_flag = has_progress_tier1
                    add_dynamic_modifier = {
                        modifier = progress_tier1_modifier
                    }
                    subtract_from_variable = { cultural_power = 150 }
                    add_popularity = {
                        ideology = divinity
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_progress_tier2
                            }
                        }
                    }
                    set_country_flag = has_progress_tier2
                    add_dynamic_modifier = {
                        modifier = progress_tier2_modifier
                    }
                    subtract_from_variable = { cultural_power = 200 }
                    add_popularity = {
                        ideology = divinity
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_progress_tier3
                            }
                        }
                    }
                    set_country_flag = has_progress_tier3
                    add_dynamic_modifier = {
                        modifier = progress_tier3_modifier
                    }
                    subtract_from_variable = { cultural_power = 300 }
                    add_popularity = {
                        ideology = divinity
                        popularity = 0.05
                    }
                }
                else = {

                }
            }
            body_button_click = {
                if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_body_tier1
                            }
                        }
                    }
                    set_country_flag = has_body_tier1
                    add_dynamic_modifier = {
                        modifier = body_tier1_modifier
                    }
                    subtract_from_variable = { cultural_power = 150 }
                    add_popularity = {
                        ideology = mastery
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_body_tier2
                            }
                        }
                    }
                    set_country_flag = has_body_tier2
                    add_dynamic_modifier = {
                        modifier = body_tier2_modifier
                    }
                    subtract_from_variable = { cultural_power = 200 }
                    add_popularity = {
                        ideology = mastery
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_body_tier3
                            }
                        }
                    }
                    set_country_flag = has_body_tier3
                    #add_dynamic_modifier = {
                    #    modifier = body_tier3_modifier
                    #}
                    subtract_from_variable = { cultural_power = 300 }
                    add_popularity = {
                        ideology = mastery
                        popularity = 0.05
                    }
                }
                else = {

                }
            }
            mind_button_click = {
                if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_mind_tier1
                            }
                        }
                    }
                    set_country_flag = has_mind_tier1
                    add_dynamic_modifier = {
                        modifier = mind_tier1_modifier
                    }
                    subtract_from_variable = { cultural_power = 150 }
                    add_popularity = {
                        ideology = harmony
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_mind_tier2
                            }
                        }
                    }
                    set_country_flag = has_mind_tier2
                    add_dynamic_modifier = {
                        modifier = mind_tier2_modifier
                    }
                    subtract_from_variable = { cultural_power = 200 }
                    add_popularity = {
                        ideology = harmony
                        popularity = 0.05
                    }
                }
                else_if = {
                    limit = {
                        NOT = {
                            ROOT = {
                                has_country_flag = has_mind_tier3
                            }
                        }
                    }
                    set_country_flag = has_mind_tier3
                    #add_dynamic_modifier = {
                    #    modifier = mind_tier3_modifier
                    #}
                    subtract_from_variable = { cultural_power = 300 }
                    add_popularity = {
                        ideology = harmony
                        popularity = 0.05
                    }
                }
                else = {

                }
            }
        }
        
        triggers = {
            hostility_button_click_enabled = {
                NOT = {
                    ROOT = {
                        OR = {
                            has_country_flag = has_benevolence_tier1
                            has_government = voracity
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = has_hostility_tier3
                    }
                    always = yes
                }
                else_if = {
                    limit = {
                        has_country_flag = has_hostility_tier2
                    }
                    check_variable = { cultural_power > 299 }
                }
                else_if = {
                    limit = {
                        has_country_flag = has_hostility_tier1
                    }
                    check_variable = { cultural_power > 199 }
                }
                else = {
                    check_variable = { cultural_power > 149 }
                }
            }
            benevolence_button_click_enabled = {
                NOT = {
                    ROOT = {
                        OR = {
                            has_country_flag = has_hostility_tier1
                            has_government = purity
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = has_benevolence_tier3
                    }
                    always = yes
                }
                else_if = {
                    limit = {
                        has_country_flag = has_benevolence_tier2
                    }
                    check_variable = { cultural_power > 299 }
                }
                else_if = {
                    limit = {
                        has_country_flag = has_benevolence_tier1
                    }
                    check_variable = { cultural_power > 199 }
                }
                else = {
                    check_variable = { cultural_power > 149 }
                }
            }
            tradition_button_click_enabled = {
                NOT = {
                    ROOT = {
                        OR = {
                            has_country_flag = has_progress_tier1
                            has_government = divinity
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = has_tradition_tier3
                    }
                    always = yes
                }
                else_if = {
                    limit = {
                        has_country_flag = has_tradition_tier2
                    }
                    check_variable = { cultural_power > 299 }
                }
                else_if = {
                    limit = {
                        has_country_flag = has_tradition_tier1
                    }
                    check_variable = { cultural_power > 199 }
                }
                else = {
                    check_variable = { cultural_power > 149 }
                }
            }
            progress_button_click_enabled = {
                NOT = {
                    ROOT = {
                        OR = {
                            has_country_flag = has_tradition_tier1
                            has_government = supremacy
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = has_progress_tier3
                    }
                    always = yes
                }
                else_if = {
                    limit = {
                        has_country_flag = has_progress_tier2
                    }
                    check_variable = { cultural_power > 299 }
                }
                else_if = {
                    limit = {
                        has_country_flag = has_progress_tier1
                    }
                    check_variable = { cultural_power > 199 }
                }
                else = {
                    check_variable = { cultural_power > 149 }
                }
            }
            body_button_click_enabled = {
                NOT = {
                    ROOT = {
                        OR = {
                            has_country_flag = has_mind_tier1
                            has_government = harmony
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = has_body_tier3
                    }
                    always = yes
                }
                else_if = {
                    limit = {
                        has_country_flag = has_body_tier2
                    }
                    check_variable = { cultural_power > 299 }
                }
                else_if = {
                    limit = {
                        has_country_flag = has_body_tier1
                    }
                    check_variable = { cultural_power > 199 }
                }
                else = {
                    check_variable = { cultural_power > 149 }
                }
            }
            mind_button_click_enabled = {
                NOT = {
                    ROOT = {
                        OR = {
                            has_country_flag = has_body_tier1
                            has_government = mastery
                        }
                    }
                }
                if = {
                    limit = {
                        has_country_flag = has_mind_tier3
                    }
                    always = yes
                }
                else_if = {
                    limit = {
                        has_country_flag = has_mind_tier2
                    }
                    check_variable = { cultural_power > 299 }
                }
                else_if = {
                    limit = {
                        has_country_flag = has_mind_tier1
                    }
                    check_variable = { cultural_power > 199 }
                }
                else = {
                    check_variable = { cultural_power > 149 }
                }
            }

            ###

            supremacy_icon_visible = {
				has_government = supremacy
			}
			purity_icon_visible = {
				has_government = purity
			}
			harmony_icon_visible = {
				has_government = harmony
			}
			neutral_icon_visible = {
				has_government = neutral
			}
			divinity_icon_visible = {
				has_government = divinity
			}
			voracity_icon_visible = {
				has_government = voracity
			}
			mastery_icon_visible = {
				has_government = mastery
			}

            supremacy_line_visible = {
				has_country_flag = has_tradition_tier1
			}
			purity_line_visible = {
				has_country_flag = has_hostility_tier1
			}
			harmony_line_visible = {
				has_country_flag = has_mind_tier1
			}
			divinity_line_visible = {
				has_country_flag = has_progress_tier1
			}
			voracity_line_visible = {
				has_country_flag = has_benevolence_tier1
			}
			mastery_line_visible = {
				has_country_flag = has_body_tier1
			}
            ###
            supremacy_fade_visible = {
				has_country_flag = has_tradition_tier2
			}
			purity_fade_visible = {
				has_country_flag = has_hostility_tier2
			}
			harmony_fade_visible = {
				has_country_flag = has_mind_tier2
			}
			divinity_fade_visible = {
				has_country_flag = has_progress_tier2
			}
			voracity_fade_visible = {
				has_country_flag = has_benevolence_tier2
			}
			mastery_fade_visible = {
				has_country_flag = has_body_tier2
			}
            ###
            supremacy_fade_2_visible = {
				has_country_flag = has_tradition_tier3
			}
			purity_fade_2_visible = {
				has_country_flag = has_hostility_tier3
			}
			harmony_fade_2_visible = {
				has_country_flag = has_mind_tier3
			}
			divinity_fade_2_visible = {
				has_country_flag = has_progress_tier3
			}
			voracity_fade_2_visible = {
				has_country_flag = has_benevolence_tier3
			}
			mastery_fade_2_visible = {
				has_country_flag = has_body_tier3
			}
            ###
            virtues_bg_cube_3_visible = {
                #OR = {
				#    has_country_flag = has_body_tier3
                #    has_country_flag = has_benevolence_tier3
                #    has_country_flag = has_progress_tier3
                #    has_country_flag = has_mind_tier3
                #    has_country_flag = has_hostility_tier3
                #    has_country_flag = has_tradition_tier3
                #}
                always = no
			}
            virtues_bg_cube_2_visible = {
                #OR = {
				#    has_country_flag = has_body_tier2
                #    has_country_flag = has_benevolence_tier2
                #    has_country_flag = has_progress_tier2
                #    has_country_flag = has_mind_tier2
                #    has_country_flag = has_hostility_tier2
                #    has_country_flag = has_tradition_tier2
                #}
                always = no
			}
            virtues_bg_cube_1_visible = {
                #OR = {
				#    has_country_flag = has_body_tier1
                #    has_country_flag = has_benevolence_tier1
                #    has_country_flag = has_progress_tier1
                #    has_country_flag = has_mind_tier1
                #    has_country_flag = has_hostility_tier1
                #    has_country_flag = has_tradition_tier1
                #}
                always = no
			}
            #
        }

        ai_enabled = {
            always = yes
        }

        ai_test_interval = 300

        ai_check = {
            check_variable = {
                cultural_power > 150
            }
		}

        ai_weights = {
            hostility_button_click = {
                ai_will_do = {
                    factor = 1
                }
            }
            benevolence_button_click = {
                ai_will_do = {
                    factor = 1
                }
            }
            tradition_button_click = {
                ai_will_do = {
                    factor = 1
                }
            }
            progress_button_click = {
                ai_will_do = {
                    factor = 1
                }
            }
            body_button_click = {
                ai_will_do = {
                    factor = 1
                }
            }
            mind_button_click = {
                ai_will_do = {
                    factor = 1
                }
            }
        }
    }
}