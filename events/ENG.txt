add_namespace = england_event

country_event = {
	id = england_event.1
	title = england_event.1.t
	desc = england_event.1.d
	
	is_triggered_only = yes
	
	immediate = {
		249 = {
			set_demilitarized_zone = yes
		}
		277 = {
			set_demilitarized_zone = yes
		}
		267 = {
			set_demilitarized_zone = yes
		}
		1024 = {
			set_demilitarized_zone = yes
		}
		260 = {
			set_demilitarized_zone = yes
		}
	}

	option = { 
		name = england_event_option.1.a
		custom_effect_tooltip = second_english_civil_war_option_a_tooltip
		hidden_effect = {
			add_to_array = {
				array = english_civilwar_array
				value = ENG
				index = 0
			}
		}
		ai_chance = {
			factor = 1
		}
	}

	option = { 
		name = england_event_option.1.b
		custom_effect_tooltip = second_english_civil_war_option_b_tooltip
		hidden_effect = {
			add_to_array = {
				array = english_civilwar_array
				value = HNG
				index = 0
			}
			1023 = {
				set_demilitarized_zone = yes
			}
		}
		ai_chance = {
			factor = 0
		}
	}

	option = { 
		name = england_event_option.1.c
		custom_effect_tooltip = second_english_civil_war_option_c_tooltip
		hidden_effect = {
			add_to_array = {
				array = english_civilwar_array
				value = JNG
				index = 0
			}
			1023 = {
				set_demilitarized_zone = yes
			}
		}
		ai_chance = {
			factor = 0
		}
	}

	option = { 
		name = england_event_option.1.d
		custom_effect_tooltip = second_english_civil_war_option_d_tooltip
		hidden_effect = {
			add_to_array = {
				array = english_civilwar_array
				value = CNG
				index = 0
			}
			1023 = {
				set_demilitarized_zone = yes
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

news_event = {
	id = england_event.2
	title = england_event.2.t
	desc = england_event.2.d
	picture = GFX_england_event.2
	
	is_triggered_only = yes

	major = yes

	immediate = {
		hidden_effect = {
			set_global_flag = ECW_start
			ENG = {
				remove_ideas = ENG_stagnant_republican_army
                country_lock_all_division_template = no
				delete_unit_template_and_units = {
					division_template = "Rover Division"
				}
				leave_faction = yes
            }
			267 = {
				transfer_state_to = JNG
			}
			JNG = {
				declare_war_on = {
					target = ENG
					type = annex_everything
				}
				add_ideas = ENG_the_sick_man_of_britannia
				add_ideas = ENG_incompetent_parliament
				add_ideas = EU_treaty_of_bern
				load_oob = JNG_ECW_OOB
				inherit_technology = ENG
			}
			260 = {
				transfer_state_to = HNG
			}
			1024 = {
				transfer_state_to = HNG
			}
			HNG = {
				declare_war_on = {
					target = JNG
					type = annex_everything
				}
				declare_war_on = {
					target = ENG
					type = annex_everything
				}
				add_ideas = ENG_the_sick_man_of_britannia
				add_ideas = ENG_incompetent_parliament
				add_ideas = EU_treaty_of_bern
				load_oob = HNG_ECW_OOB
				inherit_technology = ENG
			}
			249 = {
				transfer_state_to = CNG
			}
			277 = {
				transfer_state_to = CNG
			}
			CNG = {
				declare_war_on = {
					target = HNG
					type = annex_everything
				}
				declare_war_on = {
					target = JNG
					type = annex_everything
				}
				declare_war_on = {
					target = ENG
					type = annex_everything
				}
				add_ideas = ENG_the_sick_man_of_britannia
				add_ideas = ENG_incompetent_parliament
				add_ideas = EU_treaty_of_bern
				load_oob = CNG_ECW_OOB
				inherit_technology = ENG
			}
			every_state = {
				limit = {
					is_core_of = ENG
				}
				add_core_of = HNG
				add_core_of = JNG
				add_core_of = CNG
				#add_dynamic_modifier = {
				#	modifier = eng_cw_modifier
				#}
			}
			for_each_scope_loop = {
				array = english_civilwar_array
				transfer_state = 1023
				change_tag_from = ENG
			}
		}			
		custom_effect_tooltip = second_english_civil_war_tooltip
	}

	option = { ## If Masterist England -> ENG
		name = england_event_option.2.a
		trigger = {
			THIS = {
				tag = ENG
			}
		}
	}
	option = { ## If Purist England -> JNG
		name = england_event_option.2.b
		trigger = {
			THIS = {
				tag = JNG
			}
		}
	}
	option = { ## If Harmonist England -> HNG
		name = england_event_option.2.c
		trigger = {
			THIS = {
				tag = HNG
			}
		}
	}
	option = { ## If Undecided England -> CNG
		name = england_event_option.2.d
		trigger = {
			THIS = {
				tag = CNG
				has_government = neutral
			}
		}
	}
	option = { ## If Scotland
		name = england_event_option.2.e
		trigger = {
			THIS = {
				tag = SCO
			}
		}
	}
	option = { ## If anyone else
		name = england_event_option.2.f
		trigger = {
			THIS = {
				NOT = {
					OR = {
						tag = SCO
						tag = ENG
						tag = CNG
						tag = HNG
						tag = JNG
					}
				}
			}
		}
	}
}